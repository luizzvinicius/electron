"use strict";const z=require("electron"),R=require("path"),oe=require("child_process"),De=require("url"),k=require("fs"),Ee=require("zlib"),ye=require("crypto");var ie=typeof document<"u"?document.currentScript:null;if(typeof z=="string")throw new TypeError("Not running in an Electron environment!");const{env:le}=process,Ne="ELECTRON_IS_DEV"in le,Le=Number.parseInt(le.ELECTRON_IS_DEV,10)===1,Ce=Ne?Le:!z.app.isPackaged;function pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V={exports:{}},ee={},_e=ee.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{const e=_e("original-fs");if(Object.keys(e).length>0)return e}catch{}return k},de={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24},Ie={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"};const Se=ee.require(),F=R,se=de,Oe=Ie,Te=typeof process=="object"&&process.platform==="win32",fe=e=>e&&typeof e=="object",te=new Uint32Array(256).map((e,t)=>{for(let s=0;s<8;s++)t&1?t=3988292384^t>>>1:t>>>=1;return t>>>0});function v(e){this.sep=F.sep,this.fs=Se,fe(e)&&fe(e.fs)&&typeof e.fs.statSync=="function"&&(this.fs=e.fs)}var we=v;v.prototype.makeDir=function(e){const t=this;function s(a){let f=a.split(t.sep)[0];a.split(t.sep).forEach(function(o){if(!(!o||o.substr(-1,1)===":")){f+=t.sep+o;var g;try{g=t.fs.statSync(f)}catch{t.fs.mkdirSync(f)}if(g&&g.isFile())throw Oe.FILE_IN_THE_WAY.replace("%s",f)}})}s(e)};v.prototype.writeFileTo=function(e,t,s,a){const f=this;if(f.fs.existsSync(e)){if(!s)return!1;var o=f.fs.statSync(e);if(o.isDirectory())return!1}var g=F.dirname(e);f.fs.existsSync(g)||f.makeDir(g);var y;try{y=f.fs.openSync(e,"w",438)}catch{f.fs.chmodSync(e,438),y=f.fs.openSync(e,"w",438)}if(y)try{f.fs.writeSync(y,t,0,t.length,0)}finally{f.fs.closeSync(y)}return f.fs.chmodSync(e,a||438),!0};v.prototype.writeFileToAsync=function(e,t,s,a,f){typeof a=="function"&&(f=a,a=void 0);const o=this;o.fs.exists(e,function(g){if(g&&!s)return f(!1);o.fs.stat(e,function(y,D){if(g&&D.isDirectory())return f(!1);var L=F.dirname(e);o.fs.exists(L,function(c){c||o.makeDir(L),o.fs.open(e,"w",438,function(l,d){l?o.fs.chmod(e,438,function(){o.fs.open(e,"w",438,function(u,r){o.fs.write(r,t,0,t.length,0,function(){o.fs.close(r,function(){o.fs.chmod(e,a||438,function(){f(!0)})})})})}):d?o.fs.write(d,t,0,t.length,0,function(){o.fs.close(d,function(){o.fs.chmod(e,a||438,function(){f(!0)})})}):o.fs.chmod(e,a||438,function(){f(!0)})})})})})};v.prototype.findFiles=function(e){const t=this;function s(a,f,o){typeof f=="boolean"&&(o=f,f=void 0);let g=[];return t.fs.readdirSync(a).forEach(function(y){var D=F.join(a,y);t.fs.statSync(D).isDirectory()&&o&&(g=g.concat(s(D,f,o))),(!f||f.test(D))&&g.push(F.normalize(D)+(t.fs.statSync(D).isDirectory()?t.sep:""))}),g}return s(e,void 0,!0)};v.prototype.getAttributes=function(){};v.prototype.setAttributes=function(){};v.crc32update=function(e,t){return te[(e^t)&255]^e>>>8};v.crc32=function(e){typeof e=="string"&&(e=Buffer.from(e,"utf8")),te.length||genCRCTable();let t=e.length,s=-1;for(let a=0;a<t;)s=v.crc32update(s,e[a++]);return~s>>>0};v.methodToString=function(e){switch(e){case se.STORED:return"STORED ("+e+")";case se.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}};v.canonical=function(e){if(!e)return"";var t=F.posix.normalize("/"+e.split("\\").join("/"));return F.join(".",t)};v.sanitize=function(e,t){e=F.resolve(F.normalize(e));for(var s=t.split("/"),a=0,f=s.length;a<f;a++){var o=F.normalize(F.join(e,s.slice(a,f).join(F.sep)));if(o.indexOf(e)===0)return o}return F.normalize(F.join(e,F.basename(t)))};v.toBuffer=function(t){return Buffer.isBuffer(t)?t:t instanceof Uint8Array?Buffer.from(t):typeof t=="string"?Buffer.from(t,"utf8"):Buffer.alloc(0)};v.readBigUInt64LE=function(e,t){var s=Buffer.from(e.slice(t,t+8));return s.swap64(),parseInt(`0x${s.toString("hex")}`)};v.isWin=Te;v.crcTable=te;const X=ee.require(),me=R;X.existsSync=X.existsSync||me.existsSync;var Re=function(e){var t=e||"",s=f(),a=null;function f(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return t&&X.existsSync(t)?(a=X.statSync(t),s.directory=a.isDirectory(),s.mtime=a.mtime,s.atime=a.atime,s.executable=(73&a.mode)!==0,s.readonly=(128&a.mode)===0,s.hidden=me.basename(t)[0]==="."):console.warn("Invalid path: "+t),{get directory(){return s.directory},get readOnly(){return s.readonly},get hidden(){return s.hidden},get mtime(){return s.mtime},get atime(){return s.atime},get executable(){return s.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:t,isDirectory:s.directory,isReadOnly:s.readonly,isHidden:s.hidden,isExecutable:s.executable,mTime:s.mtime,aTime:s.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}};V.exports=we;V.exports.Constants=de;V.exports.Errors=Ie;V.exports.FileAttr=Re;var G=V.exports,K={},P=G,m=P.Constants,ve=function(){var e=20,t=10,s=0,a=0,f=0,o=0,g=0,y=0,D=0,L=0,c=0,l=0,d=0,u=0,r=0;e|=P.isWin?2560:768,s|=m.FLG_EFS;var i={};function E(n){n=new Date(n),f=(n.getFullYear()-1980&127)<<25|n.getMonth()+1<<21|n.getDate()<<16|n.getHours()<<11|n.getMinutes()<<5|n.getSeconds()>>1}return E(+new Date),{get made(){return e},set made(n){e=n},get version(){return t},set version(n){t=n},get flags(){return s},set flags(n){s=n},get method(){return a},set method(n){switch(n){case m.STORED:this.version=10;case m.DEFLATED:default:this.version=20}a=n},get time(){return new Date((f>>25&127)+1980,(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(f&31)<<1)},set time(n){E(n)},get timeHighByte(){return f>>>8&255},get crc(){return o},set crc(n){o=Math.max(0,n)>>>0},get compressedSize(){return g},set compressedSize(n){g=Math.max(0,n)>>>0},get size(){return y},set size(n){y=Math.max(0,n)>>>0},get fileNameLength(){return D},set fileNameLength(n){D=n},get extraLength(){return L},set extraLength(n){L=n},get commentLength(){return c},set commentLength(n){c=n},get diskNumStart(){return l},set diskNumStart(n){l=Math.max(0,n)>>>0},get inAttr(){return d},set inAttr(n){d=Math.max(0,n)>>>0},get attr(){return u},set attr(n){u=Math.max(0,n)>>>0},get fileAttr(){return u?(u>>>0|0)>>16&4095:0},get offset(){return r},set offset(n){r=Math.max(0,n)>>>0},get encripted(){return(s&1)===1},get entryHeaderSize(){return m.CENHDR+D+L+c},get realDataOffset(){return r+m.LOCHDR+i.fnameLen+i.extraLen},get dataHeader(){return i},loadDataHeaderFromBinary:function(n){var I=n.slice(r,r+m.LOCHDR);if(I.readUInt32LE(0)!==m.LOCSIG)throw new Error(P.Errors.INVALID_LOC);i={version:I.readUInt16LE(m.LOCVER),flags:I.readUInt16LE(m.LOCFLG),method:I.readUInt16LE(m.LOCHOW),time:I.readUInt32LE(m.LOCTIM),crc:I.readUInt32LE(m.LOCCRC),compressedSize:I.readUInt32LE(m.LOCSIZ),size:I.readUInt32LE(m.LOCLEN),fnameLen:I.readUInt16LE(m.LOCNAM),extraLen:I.readUInt16LE(m.LOCEXT)}},loadFromBinary:function(n){if(n.length!==m.CENHDR||n.readUInt32LE(0)!==m.CENSIG)throw new Error(P.Errors.INVALID_CEN);e=n.readUInt16LE(m.CENVEM),t=n.readUInt16LE(m.CENVER),s=n.readUInt16LE(m.CENFLG),a=n.readUInt16LE(m.CENHOW),f=n.readUInt32LE(m.CENTIM),o=n.readUInt32LE(m.CENCRC),g=n.readUInt32LE(m.CENSIZ),y=n.readUInt32LE(m.CENLEN),D=n.readUInt16LE(m.CENNAM),L=n.readUInt16LE(m.CENEXT),c=n.readUInt16LE(m.CENCOM),l=n.readUInt16LE(m.CENDSK),d=n.readUInt16LE(m.CENATT),u=n.readUInt32LE(m.CENATX),r=n.readUInt32LE(m.CENOFF)},dataHeaderToBinary:function(){var n=Buffer.alloc(m.LOCHDR);return n.writeUInt32LE(m.LOCSIG,0),n.writeUInt16LE(t,m.LOCVER),n.writeUInt16LE(s,m.LOCFLG),n.writeUInt16LE(a,m.LOCHOW),n.writeUInt32LE(f,m.LOCTIM),n.writeUInt32LE(o,m.LOCCRC),n.writeUInt32LE(g,m.LOCSIZ),n.writeUInt32LE(y,m.LOCLEN),n.writeUInt16LE(D,m.LOCNAM),n.writeUInt16LE(L,m.LOCEXT),n},entryHeaderToBinary:function(){var n=Buffer.alloc(m.CENHDR+D+L+c);return n.writeUInt32LE(m.CENSIG,0),n.writeUInt16LE(e,m.CENVEM),n.writeUInt16LE(t,m.CENVER),n.writeUInt16LE(s,m.CENFLG),n.writeUInt16LE(a,m.CENHOW),n.writeUInt32LE(f,m.CENTIM),n.writeUInt32LE(o,m.CENCRC),n.writeUInt32LE(g,m.CENSIZ),n.writeUInt32LE(y,m.CENLEN),n.writeUInt16LE(D,m.CENNAM),n.writeUInt16LE(L,m.CENEXT),n.writeUInt16LE(c,m.CENCOM),n.writeUInt16LE(l,m.CENDSK),n.writeUInt16LE(d,m.CENATT),n.writeUInt32LE(u,m.CENATX),n.writeUInt32LE(r,m.CENOFF),n.fill(0,m.CENHDR),n},toJSON:function(){const n=function(I){return I+" bytes"};return{made:e,version:t,flags:s,method:P.methodToString(a),time:this.time,crc:"0x"+o.toString(16).toUpperCase(),compressedSize:n(g),size:n(y),fileNameLength:n(D),extraLength:n(L),commentLength:n(c),diskNumStart:l,inAttr:d,attr:u,offset:r,entryHeaderSize:n(m.CENHDR+D+L+c)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}},M=G,p=M.Constants,xe=function(){var e=0,t=0,s=0,a=0,f=0;return{get diskEntries(){return e},set diskEntries(o){e=t=o},get totalEntries(){return t},set totalEntries(o){t=e=o},get size(){return s},set size(o){s=o},get offset(){return a},set offset(o){a=o},get commentLength(){return f},set commentLength(o){f=o},get mainHeaderSize(){return p.ENDHDR+f},loadFromBinary:function(o){if((o.length!==p.ENDHDR||o.readUInt32LE(0)!==p.ENDSIG)&&(o.length<p.ZIP64HDR||o.readUInt32LE(0)!==p.ZIP64SIG))throw new Error(M.Errors.INVALID_END);o.readUInt32LE(0)===p.ENDSIG?(e=o.readUInt16LE(p.ENDSUB),t=o.readUInt16LE(p.ENDTOT),s=o.readUInt32LE(p.ENDSIZ),a=o.readUInt32LE(p.ENDOFF),f=o.readUInt16LE(p.ENDCOM)):(e=M.readBigUInt64LE(o,p.ZIP64SUB),t=M.readBigUInt64LE(o,p.ZIP64TOT),s=M.readBigUInt64LE(o,p.ZIP64SIZE),a=M.readBigUInt64LE(o,p.ZIP64OFF),f=0)},toBinary:function(){var o=Buffer.alloc(p.ENDHDR+f);return o.writeUInt32LE(p.ENDSIG,0),o.writeUInt32LE(0,4),o.writeUInt16LE(e,p.ENDSUB),o.writeUInt16LE(t,p.ENDTOT),o.writeUInt32LE(s,p.ENDSIZ),o.writeUInt32LE(a,p.ENDOFF),o.writeUInt16LE(f,p.ENDCOM),o.fill(" ",p.ENDHDR),o},toJSON:function(){const o=function(g,y){let D=g.toString(16).toUpperCase();for(;D.length<y;)D="0"+D;return"0x"+D};return{diskEntries:e,totalEntries:t,size:s+" bytes",offset:o(a,4),commentLength:f}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}};K.EntryHeader=ve;K.MainHeader=xe;var W={},Ae=function(e){var t=Ee,s={chunkSize:(parseInt(e.length/1024)+1)*1024};return{deflate:function(){return t.deflateRawSync(e,s)},deflateAsync:function(a){var f=t.createDeflateRaw(s),o=[],g=0;f.on("data",function(y){o.push(y),g+=y.length}),f.on("end",function(){var y=Buffer.alloc(g),D=0;y.fill(0);for(var L=0;L<o.length;L++){var c=o[L];c.copy(y,D),D+=c.length}a&&a(y)}),f.end(e)}}},Fe=function(e){var t=Ee;return{inflate:function(){return t.inflateRawSync(e)},inflateAsync:function(s){var a=t.createInflateRaw(),f=[],o=0;a.on("data",function(g){f.push(g),o+=g.length}),a.on("end",function(){var g=Buffer.alloc(o),y=0;g.fill(0);for(var D=0;D<f.length;D++){var L=f[D];L.copy(g,y),y+=L.length}s&&s(g)}),a.end(e)}}};const{randomFillSync:ce}=ye,Ue=new Uint32Array(256).map((e,t)=>{for(let s=0;s<8;s++)t&1?t=t>>>1^3988292384:t>>>=1;return t>>>0}),ge=(e,t)=>Math.imul(e,t)>>>0,ue=(e,t)=>Ue[(e^t)&255]^e>>>8,j=()=>typeof ce=="function"?ce(Buffer.alloc(12)):j.node();j.node=()=>{const e=Buffer.alloc(12),t=e.length;for(let s=0;s<t;s++)e[s]=Math.random()*256&255;return e};const b={genSalt:j};function q(e){const t=Buffer.isBuffer(e)?e:Buffer.from(e);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let s=0;s<t.length;s++)this.updateKeys(t[s])}q.prototype.updateKeys=function(e){const t=this.keys;return t[0]=ue(t[0],e),t[1]+=t[0]&255,t[1]=ge(t[1],134775813)+1,t[2]=ue(t[2],t[1]>>>24),e};q.prototype.next=function(){const e=(this.keys[2]|2)>>>0;return ge(e,e^1)>>8&255};function Be(e){const t=new q(e);return function(s){const a=Buffer.alloc(s.length);let f=0;for(let o of s)a[f++]=t.updateKeys(o^t.next());return a}}function He(e){const t=new q(e);return function(s,a,f=0){a||(a=Buffer.alloc(s.length));for(let o of s){const g=t.next();a[f++]=o^g,t.updateKeys(o)}return a}}function Ze(e,t,s){if(!e||!Buffer.isBuffer(e)||e.length<12)return Buffer.alloc(0);const a=Be(s),f=a(e.slice(0,12)),o=(t.flags&8)===8?t.timeHighByte:t.crc>>>24;if(f[11]!==o)throw"ADM-ZIP: Wrong Password";return a(e.slice(12))}function Me(e){Buffer.isBuffer(e)&&e.length>=12?b.genSalt=function(){return e.slice(0,12)}:e==="node"?b.genSalt=j.node:b.genSalt=j}function ze(e,t,s,a=!1){e==null&&(e=Buffer.alloc(0)),Buffer.isBuffer(e)||(e=Buffer.from(e.toString()));const f=He(s),o=b.genSalt();o[11]=t.crc>>>24&255,a&&(o[10]=t.crc>>>16&255);const g=Buffer.alloc(e.length+12);return f(o,g),f(e,g,12)}var Pe={decrypt:Ze,encrypt:ze,_salter:Me};W.Deflater=Ae;W.Inflater=Fe;W.ZipCrypto=Pe;var _=G,je=K,U=_.Constants,Y=W,he=function(e){var t=new je.EntryHeader,s=Buffer.alloc(0),a=Buffer.alloc(0),f=!1,o=null,g=Buffer.alloc(0);function y(){return!e||!Buffer.isBuffer(e)?Buffer.alloc(0):(t.loadDataHeaderFromBinary(e),e.slice(t.realDataOffset,t.realDataOffset+t.compressedSize))}function D(r){return!((t.flags&8)!==8&&_.crc32(r)!==t.dataHeader.crc)}function L(r,i,E){if(typeof i>"u"&&typeof r=="string"&&(E=r,r=void 0),f)return r&&i&&i(Buffer.alloc(0),_.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var n=y();if(n.length===0)return r&&i&&i(n),n;if(t.encripted){if(typeof E!="string"&&!Buffer.isBuffer(E))throw new Error("ADM-ZIP: Incompatible password parameter");n=Y.ZipCrypto.decrypt(n,t,E)}var I=Buffer.alloc(t.size);switch(t.method){case _.Constants.STORED:if(n.copy(I),D(I))return r&&i&&i(I),I;throw r&&i&&i(I,_.Errors.BAD_CRC),new Error(_.Errors.BAD_CRC);case _.Constants.DEFLATED:var h=new Y.Inflater(n);if(r)h.inflateAsync(function(N){N.copy(N,0),i&&(D(N)?i(N):i(N,_.Errors.BAD_CRC))});else{if(h.inflate(I).copy(I,0),!D(I))throw new Error(_.Errors.BAD_CRC+" "+s.toString());return I}break;default:throw r&&i&&i(Buffer.alloc(0),_.Errors.UNKNOWN_METHOD),new Error(_.Errors.UNKNOWN_METHOD)}}function c(r,i){if((!o||!o.length)&&Buffer.isBuffer(e))return r&&i&&i(y()),y();if(o.length&&!f){var E;switch(t.method){case _.Constants.STORED:return t.compressedSize=t.size,E=Buffer.alloc(o.length),o.copy(E),r&&i&&i(E),E;default:case _.Constants.DEFLATED:var n=new Y.Deflater(o);if(r)n.deflateAsync(function(h){E=Buffer.alloc(h.length),t.compressedSize=h.length,h.copy(E),i&&i(E)});else{var I=n.deflate();return t.compressedSize=I.length,I}n=null;break}}else if(r&&i)i(Buffer.alloc(0));else return Buffer.alloc(0)}function l(r,i){return(r.readUInt32LE(i+4)<<4)+r.readUInt32LE(i)}function d(r){for(var i=0,E,n,I;i<r.length;)E=r.readUInt16LE(i),i+=2,n=r.readUInt16LE(i),i+=2,I=r.slice(i,i+n),i+=n,U.ID_ZIP64===E&&u(I)}function u(r){var i,E,n,I;r.length>=U.EF_ZIP64_SCOMP&&(i=l(r,U.EF_ZIP64_SUNCOMP),t.size===U.EF_ZIP64_OR_32&&(t.size=i)),r.length>=U.EF_ZIP64_RHO&&(E=l(r,U.EF_ZIP64_SCOMP),t.compressedSize===U.EF_ZIP64_OR_32&&(t.compressedSize=E)),r.length>=U.EF_ZIP64_DSN&&(n=l(r,U.EF_ZIP64_RHO),t.offset===U.EF_ZIP64_OR_32&&(t.offset=n)),r.length>=U.EF_ZIP64_DSN+4&&(I=r.readUInt32LE(U.EF_ZIP64_DSN),t.diskNumStart===U.EF_ZIP64_OR_16&&(t.diskNumStart=I))}return{get entryName(){return s.toString()},get rawEntryName(){return s},set entryName(r){s=_.toBuffer(r);var i=s[s.length-1];f=i===47||i===92,t.fileNameLength=s.length},get extra(){return g},set extra(r){g=r,t.extraLength=r.length,d(r)},get comment(){return a.toString()},set comment(r){a=_.toBuffer(r),t.commentLength=a.length},get name(){var r=s.toString();return f?r.substr(r.length-1).split("/").pop():r.split("/").pop()},get isDirectory(){return f},getCompressedData:function(){return c(!1,null)},getCompressedDataAsync:function(r){c(!0,r)},setData:function(r){o=_.toBuffer(r),!f&&o.length?(t.size=o.length,t.method=_.Constants.DEFLATED,t.crc=_.crc32(r),t.changed=!0):t.method=_.Constants.STORED},getData:function(r){return t.changed?o:L(!1,null,r)},getDataAsync:function(r,i){t.changed?r(o):L(!0,r,i)},set attr(r){t.attr=r},get attr(){return t.attr},set header(r){t.loadFromBinary(r)},get header(){return t},packHeader:function(){var r=t.entryHeaderToBinary(),i=_.Constants.CENHDR;return s.copy(r,i),i+=s.length,t.extraLength&&(g.copy(r,i),i+=t.extraLength),t.commentLength&&a.copy(r,i),r},toJSON:function(){const r=function(i){return"<"+(i&&i.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:t.toJSON(),compressedData:r(e),data:r(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}};const ae=he,Ve=K,A=G;var Ge=function(e,t){var s=[],a={},f=Buffer.alloc(0),o=new Ve.MainHeader,g=!1;const y=Object.assign(Object.create(null),t),{noSort:D}=y;e?l(y.readEntries):g=!0;function L(u){const r=o.diskEntries;let i=o.offset;for(let E=0;E<r;E++){let n=i;const I=new ae(e);I.header=e.slice(n,n+=A.Constants.CENHDR),I.entryName=e.slice(n,n+=I.header.fileNameLength),i+=I.header.entryHeaderSize,u(I)}}function c(){g=!0,a={},s=new Array(o.diskEntries);for(var u=o.offset,r=0;r<s.length;r++){var i=u,E=new ae(e);E.header=e.slice(i,i+=A.Constants.CENHDR),E.entryName=e.slice(i,i+=E.header.fileNameLength),E.header.extraLength&&(E.extra=e.slice(i,i+=E.header.extraLength)),E.header.commentLength&&(E.comment=e.slice(i,i+E.header.commentLength)),u+=E.header.entryHeaderSize,s[r]=E,a[E.entryName]=E}}function l(u){var r=e.length-A.Constants.ENDHDR,i=Math.max(0,r-65535),E=i,n=e.length,I=-1,h=0;for(r;r>=E;r--)if(e[r]===80){if(e.readUInt32LE(r)===A.Constants.ENDSIG){I=r,h=r,n=r+A.Constants.ENDHDR,E=r-A.Constants.END64HDR;continue}if(e.readUInt32LE(r)===A.Constants.END64SIG){E=i;continue}if(e.readUInt32LE(r)===A.Constants.ZIP64SIG){I=r,n=r+A.readBigUInt64LE(e,r+A.Constants.ZIP64SIZE)+A.Constants.ZIP64LEAD;break}}if(!~I)throw new Error(A.Errors.INVALID_FORMAT);o.loadFromBinary(e.slice(I,n)),o.commentLength&&(f=e.slice(h+A.Constants.ENDHDR)),u&&c()}function d(){s.length>1&&!D&&s.sort((u,r)=>u.entryName.toLowerCase().localeCompare(r.entryName.toLowerCase()))}return{get entries(){return g||c(),s},get comment(){return f.toString()},set comment(u){f=A.toBuffer(u),o.commentLength=f.length},getEntryCount:function(){return g?s.length:o.diskEntries},forEach:function(u){if(!g){L(u);return}s.forEach(u)},getEntry:function(u){return g||c(),a[u]||null},setEntry:function(u){g||c(),s.push(u),a[u.entryName]=u,o.totalEntries=s.length},deleteEntry:function(u){g||c();var r=a[u];if(r&&r.isDirectory){var i=this;this.getEntryChildren(r).forEach(function(E){E.entryName!==u&&i.deleteEntry(E.entryName)})}s.splice(s.indexOf(r),1),delete a[u],o.totalEntries=s.length},getEntryChildren:function(u){if(g||c(),u&&u.isDirectory){const r=[],i=u.entryName,E=i.length;return s.forEach(function(n){n.entryName.substr(0,E)===i&&r.push(n)}),r}return[]},compressToBuffer:function(){g||c(),d();const u=[],r=[];let i=0,E=0;o.size=0,o.offset=0;for(const h of s){const N=h.getCompressedData();h.header.offset=E;const O=h.header.dataHeaderToBinary(),S=h.rawEntryName.length,C=Buffer.alloc(S+h.extra.length);h.rawEntryName.copy(C,0),h.extra.copy(C,S);const w=O.length+C.length+N.length;E+=w,u.push(O),u.push(C),u.push(N);const x=h.packHeader();r.push(x),o.size+=x.length,i+=w+x.length}i+=o.mainHeaderSize,o.offset=E,E=0;const n=Buffer.alloc(i);for(const h of u)h.copy(n,E),E+=h.length;for(const h of r)h.copy(n,E),E+=h.length;const I=o.toBinary();return f&&f.copy(I,A.Constants.ENDHDR),I.copy(n,E),n},toAsyncBuffer:function(u,r,i,E){try{g||c(),d();const n=[],I=[];let h=0,N=0;o.size=0,o.offset=0;const O=function(S){if(S.length){const C=S.pop(),w=C.entryName+C.extra.toString();i&&i(w),C.getCompressedDataAsync(function(x){E&&E(w),C.header.offset=N;const Z=C.header.dataHeaderToBinary(),ne=Buffer.alloc(w.length,w),re=Z.length+ne.length+x.length;N+=re,n.push(Z),n.push(ne),n.push(x);const J=C.packHeader();I.push(J),o.size+=J.length,h+=re+J.length,O(S)})}else{h+=o.mainHeaderSize,o.offset=N,N=0;const C=Buffer.alloc(h);n.forEach(function(x){x.copy(C,N),N+=x.length}),I.forEach(function(x){x.copy(C,N),N+=x.length});const w=o.toBinary();f&&f.copy(w,A.Constants.ENDHDR),w.copy(C,N),u(C)}};O(s)}catch(n){r(n)}}}};const T=G,B=R,$e=he,be=Ge,H=(e,t)=>typeof e=="boolean"?e:t,Q=(e,t)=>typeof e=="string"?e:t,Xe={noSort:!1,readEntries:!1,method:T.Constants.NONE,fs:null};var Ke=function(e,t){let s=null;const a=Object.assign(Object.create(null),Xe);e&&typeof e=="object"&&(e instanceof Uint8Array||(Object.assign(a,e),e=a.input?a.input:void 0,a.input&&delete a.input),Buffer.isBuffer(e)&&(s=e,a.method=T.Constants.BUFFER,e=void 0)),Object.assign(a,t);const f=new T(a);if(e&&typeof e=="string")if(f.fs.existsSync(e))a.method=T.Constants.FILE,a.filename=e,s=f.fs.readFileSync(e);else throw new Error(T.Errors.INVALID_FILENAME);const o=new be(s,a),{canonical:g,sanitize:y}=T;function D(c){if(c&&o){var l;if(typeof c=="string"&&(l=o.getEntry(c)),typeof c=="object"&&typeof c.entryName<"u"&&typeof c.header<"u"&&(l=o.getEntry(c.entryName)),l)return l}return null}function L(c){const{join:l,normalize:d,sep:u}=B.posix;return l(".",d(u+c.split("\\").join(u)+u))}return{readFile:function(c,l){var d=D(c);return d&&d.getData(l)||null},readFileAsync:function(c,l){var d=D(c);d?d.getDataAsync(l):l(null,"getEntry failed for:"+c)},readAsText:function(c,l){var d=D(c);if(d){var u=d.getData();if(u&&u.length)return u.toString(l||"utf8")}return""},readAsTextAsync:function(c,l,d){var u=D(c);u?u.getDataAsync(function(r,i){if(i){l(r,i);return}r&&r.length?l(r.toString(d||"utf8")):l("")}):l("")},deleteFile:function(c){var l=D(c);l&&o.deleteEntry(l.entryName)},addZipComment:function(c){o.comment=c},getZipComment:function(){return o.comment||""},addZipEntryComment:function(c,l){var d=D(c);d&&(d.comment=l)},getZipEntryComment:function(c){var l=D(c);return l&&l.comment||""},updateFile:function(c,l){var d=D(c);d&&d.setData(l)},addLocalFile:function(c,l,d,u){if(f.fs.existsSync(c)){l=l?L(l):"";var r=c.split("\\").join("/").split("/").pop();l+=d||r;const i=f.fs.statSync(c);this.addFile(l,f.fs.readFileSync(c),u,i)}else throw new Error(T.Errors.FILE_NOT_FOUND.replace("%s",c))},addLocalFolder:function(c,l,d,u){if(d instanceof RegExp?d=function(r){return function(i){return r.test(i)}}(d):typeof d!="function"&&(d=function(){return!0}),l=l?L(l):"",c=B.normalize(c),f.fs.existsSync(c)){const r=f.findFiles(c),i=this;r.length&&r.forEach(function(E){var n=B.relative(c,E).split("\\").join("/");if(d(n)){var I=f.fs.statSync(E);I.isFile()?i.addFile(l+n,f.fs.readFileSync(E),"",u||I):i.addFile(l+n+"/",Buffer.alloc(0),"",u||I)}})}else throw new Error(T.Errors.FILE_NOT_FOUND.replace("%s",c))},addLocalFolderAsync:function(c,l,d,u){u instanceof RegExp?u=function(i){return function(E){return i.test(E)}}(u):typeof u!="function"&&(u=function(){return!0}),d=d?L(d):"",c=B.normalize(c);var r=this;f.fs.open(c,"r",function(i){if(i&&i.code==="ENOENT")l(void 0,T.Errors.FILE_NOT_FOUND.replace("%s",c));else if(i)l(void 0,i);else{var E=f.findFiles(c),n=-1,I=function(){if(n+=1,n<E.length){var h=E[n],N=B.relative(c,h).split("\\").join("/");N=N.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),u(N)?f.fs.stat(h,function(O,S){O&&l(void 0,O),S.isFile()?f.fs.readFile(h,function(C,w){C?l(void 0,C):(r.addFile(d+N,w,"",S),I())}):(r.addFile(d+N+"/",Buffer.alloc(0),"",S),I())}):process.nextTick(()=>{I()})}else l(!0,void 0)};I()}})},addLocalFolderPromise:function(c,l){return new Promise((d,u)=>{const{filter:r,zipPath:i}=Object.assign({},l);this.addLocalFolderAsync(c,(E,n)=>{n&&u(n),E&&d(this)},i,r)})},addFile:function(c,l,d,u){let r=D(c);const i=r!=null;i||(r=new $e,r.entryName=c),r.comment=d||"";const E=typeof u=="object"&&u instanceof f.fs.Stats;E&&(r.header.time=u.mtime);var n=r.isDirectory?16:0;let I=r.isDirectory?16384:32768;E?I|=4095&u.mode:typeof u=="number"?I|=4095&u:I|=r.isDirectory?493:420,n=(n|I<<16)>>>0,r.attr=n,r.setData(l),i||o.setEntry(r)},getEntries:function(c){return o.password=c,o?o.entries:[]},getEntry:function(c){return D(c)},getEntryCount:function(){return o.getEntryCount()},forEach:function(c){return o.forEach(c)},extractEntryTo:function(c,l,d,u,r,i){u=H(u,!1),r=H(r,!1),d=H(d,!0),i=Q(i,Q(r,void 0));var E=D(c);if(!E)throw new Error(T.Errors.NO_ENTRY);var n=g(E.entryName),I=y(l,i&&!E.isDirectory?i:d?n:B.basename(n));if(E.isDirectory){var h=o.getEntryChildren(E);return h.forEach(function(S){if(S.isDirectory)return;var C=S.getData();if(!C)throw new Error(T.Errors.CANT_EXTRACT_FILE);var w=g(S.entryName),x=y(l,d?w:B.basename(w));const Z=r?S.header.fileAttr:void 0;f.writeFileTo(x,C,u,Z)}),!0}var N=E.getData(o.password);if(!N)throw new Error(T.Errors.CANT_EXTRACT_FILE);if(f.fs.existsSync(I)&&!u)throw new Error(T.Errors.CANT_OVERRIDE);const O=r?c.header.fileAttr:void 0;return f.writeFileTo(I,N,u,O),!0},test:function(c){if(!o)return!1;for(var l in o.entries)try{if(l.isDirectory)continue;var d=o.entries[l].getData(c);if(!d)return!1}catch{return!1}return!0},extractAllTo:function(c,l,d,u){if(l=H(l,!1),u=Q(d,u),d=H(d,!1),!o)throw new Error(T.Errors.NO_ZIP);o.entries.forEach(function(r){var i=y(c,g(r.entryName.toString()));if(r.isDirectory){f.makeDir(i);return}var E=r.getData(u);if(!E)throw new Error(T.Errors.CANT_EXTRACT_FILE);const n=d?r.header.fileAttr:void 0;f.writeFileTo(i,E,l,n);try{f.fs.utimesSync(i,r.header.time,r.header.time)}catch{throw new Error(T.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(c,l,d,u){if(l=H(l,!1),typeof d=="function"&&!u&&(u=d),d=H(d,!1),u||(u=function(h){throw new Error(h)}),!o){u(new Error(T.Errors.NO_ZIP));return}c=B.resolve(c);const r=h=>y(c,B.normalize(g(h.entryName.toString()))),i=(h,N)=>new Error(h+': "'+N+'"'),E=[],n=new Set;o.entries.forEach(h=>{h.isDirectory?E.push(h):n.add(h)});for(const h of E){const N=r(h),O=d?h.header.fileAttr:void 0;try{f.makeDir(N),O&&f.fs.chmodSync(N,O),f.fs.utimesSync(N,h.header.time,h.header.time)}catch{u(i("Unable to create folder",N))}}const I=()=>{n.size===0&&u()};for(const h of n.values()){const N=B.normalize(g(h.entryName.toString())),O=y(c,N);h.getDataAsync(function(S,C){if(C){u(new Error(C));return}if(!S)u(new Error(T.Errors.CANT_EXTRACT_FILE));else{const w=d?h.header.fileAttr:void 0;f.writeFileToAsync(O,S,l,w,function(x){if(!x){u(i("Unable to write file",O));return}f.fs.utimes(O,h.header.time,h.header.time,function(Z){if(Z){u(i("Unable to set times",O));return}I(),n.delete(h)})})}})}I()},writeZip:function(c,l){if(arguments.length===1&&typeof c=="function"&&(l=c,c=""),!c&&a.filename&&(c=a.filename),!!c){var d=o.compressToBuffer();if(d){var u=f.writeFileTo(c,d,!0);typeof l=="function"&&l(u?null:new Error("failed"),"")}}},writeZipPromise:function(c,l){const{overwrite:d,perm:u}=Object.assign({overwrite:!0},l);return new Promise((r,i)=>{!c&&a.filename&&(c=a.filename),c||i("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(E=>{const n=I=>I?r(I):i("ADM-ZIP: Wasn't able to write zip file");f.writeFileToAsync(c,E,d,u,n)},i)})},toBufferPromise:function(){return new Promise((c,l)=>{o.toAsyncBuffer(c,l)})},toBuffer:function(c,l,d,u){return this.valueOf=2,typeof c=="function"?(o.toAsyncBuffer(c,l,d,u),null):o.compressToBuffer()}}};const We=pe(Ke);async function qe(e){if(!k.existsSync(e)){const t=new Date,s=JSON.stringify({installed:!0,IPFS_version:"0.33.0",Date:`${t.getDate()}/${new Date().getMonth()+1}/${t.getFullYear()} ${t.getHours()}:${t.getMinutes()}`},null,2);return k.writeFile(e,s,()=>{}),!0}return!1}function Je(e){z.shell.openPath(R.join(process.env.ROOT,`${e}IPFS-Desktop-0.33.0.exe`)),new We(R.join(process.env.ROOT,`${e}ipfs-cluster-service_v1.0.8_windows-amd64.zip`)).extractAllTo(R.join(process.env.ROOT,`${e}`)),z.shell.openPath(R.join(process.env.ROOT,`${e}ipfs-cluster-service/ipfs-cluster-service.exe`))}const Ye=De.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:ie&&ie.src||new URL("main.js",document.baseURI).href),Qe=R.dirname(Ye),ke=()=>new z.BrowserWindow({width:1e3,height:600,webPreferences:{preload:et,nodeIntegrationInWorker:!0,contextIsolation:!1,nodeIntegration:!0,webSecurity:!1}});process.env.ROOT=R.join(Qe,"..");process.env.DIST=R.join(process.env.ROOT,"dist-electron");process.env.VITE_PUBLIC=process.env.VITE_DEV_SERVER_URL?R.join(process.env.ROOT,"public"):R.join(process.env.ROOT,".output/public");process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";const et=R.join(process.env.DIST,"preload.js"),$=Ce?"release/win-unpacked/resources/downloads/":"../../resources/downloads/";z.app.whenReady().then(async()=>{await qe(R.join(process.env.ROOT,$,"infoDependencies.json"))&&Je($);const t=ke();process.env.VITE_DEV_SERVER_URL?t.loadURL(process.env.VITE_DEV_SERVER_URL):t.loadFile(R.join(process.env.VITE_PUBLIC,"index.html")),oe.exec(`${R.join(process.env.ROOT,`${$}ipfs-cluster-service/ipfs-cluster-service.exe`)} init -f ${process.env.CLUSTER_CONFIG_URL}`,(s,a,f)=>{console.log(s),console.log(f),console.log(a)}),oe.exec(`${R.join(process.env.ROOT,`${$}ipfs-cluster-service/ipfs-cluster-service.exe`)} -f daemon --bootstrap /ip4/${process.env.IPFS_URL}/tcp/9092/p2p/12D3KooWR8MxQgHGLF5vx1ShZy3Dkb5ZMjgm5MjVpJaDpi1Qqpwp`,(s,a,f)=>{console.log(s),console.log(f),console.log(a)})});
